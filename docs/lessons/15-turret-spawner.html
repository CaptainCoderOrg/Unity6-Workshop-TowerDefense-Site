<!DOCTYPE html> <html><head>
		<title>15 - Turret Spawner</title>
		<base href="../">
		<meta id="root-path" root-path="../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="Tower Defense Course - 15 - Turret Spawner">
		<meta property="og:title" content="15 - Turret Spawner">
		<meta property="og:description" content="Tower Defense Course - 15 - Turret Spawner">
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://towerdefense.captaincoder.org/lessons/15-turret-spawner.html">
		<meta property="og:image" content="https://towerdefense.captaincoder.org/lib/media/verify-on-cursor-click-inspector.png">
		<meta property="og:site_name" content="Tower Defense Course">
		<meta name="author" content="Captain Coder"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://towerdefense.captaincoder.org/lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager theme-dark show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="15 - Turret Spawner">15 - Turret Spawner</h1><div class="el-h2 heading-wrapper"><h2 data-heading="Challenge: Create an OnCursorClick event" dir="auto" class="heading" id="Challenge:_Create_an_OnCursorClick_event"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Challenge: Create an OnCursorClick event</h2><div class="heading-children"><div class="el-p"><p dir="auto">To be able to detect when the player has clicked on a tile, you will add a new event to the <code>TileController</code> that can be used to forward click events. </p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p><input data-line="0" type="checkbox" class="task-list-item-checkbox">Add an <code>UnityEvent&lt;TileController&gt; OnCursorClick</code> property to your <code>TileController</code></p>
<ul>
<li data-line="1" dir="auto">Hint: <a data-href="14 - Tile Cursor#TileController OnCursorEnter Event" href="lessons/14-tile-cursor.html#TileController_OnCursorEnter_Event" class="internal-link" target="_self" rel="noopener nofollow">14 - Tile Cursor &gt; TileController OnCursorEnter Event</a></li>
</ul>
</li>
<li data-line="3" data-task="" class="task-list-item" dir="auto">
<p><input data-line="3" type="checkbox" class="task-list-item-checkbox">Verify that the event is now available in the inspector.</p>
</li>
</ul></div><div class="el-p"><p dir="auto"><span alt="verify-on-cursor-click-inspector.png" src="verify-on-cursor-click-inspector.png" class="internal-embed media-embed image-embed is-loaded"><img alt="verify-on-cursor-click-inspector.png" src="lib/media/verify-on-cursor-click-inspector.png"></span></p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><input data-line="0" type="checkbox" class="task-list-item-checkbox">Add a <code>NotifyCursorClicked()</code> method that invokes <code>OnCursorClick</code>
<ul>
<li data-line="1" dir="auto">Hint: <a data-href="14 - Tile Cursor#NotifyCursorEnter" href="lessons/14-tile-cursor.html#NotifyCursorEnter" class="internal-link" target="_self" rel="noopener nofollow">14 - Tile Cursor &gt; NotifyCursorEnter</a></li>
</ul>
</li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">In your <strong>Tile Prefab</strong> update the model's <code>OnClick</code> event to invoke the <code>NotifyCursorClicked</code> method.</li>
</ul></div><div class="el-p"><p dir="auto"><span alt="on-click-notify-cursor-clicked.png" src="on-click-notify-cursor-clicked.png" class="internal-embed media-embed image-embed is-loaded"><img alt="on-click-notify-cursor-clicked.png" src="lib/media/on-click-notify-cursor-clicked.png"></span></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="TurretSpawner" dir="auto" class="heading" id="TurretSpawner"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>TurretSpawner</h2><div class="heading-children"><div class="el-p"><p dir="auto">Now that you have an event that sends an event when a tile is clicked, you add in a Turret Spawner that will listen for clicks. If the tile is not occupied, it will spawn a turret at that location.</p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Create a new <code>MonoBehaviour</code> called <code>TurretSpawner</code></li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">Add a <code>GameObject TurretPrefab</code> property to your <code>TurretSpawner</code></li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">Add the <code>[field: SerializeField]</code> attribute to the <code>TurretPrefab</code> property</li>
</ul></div><div class="el-p"><p dir="auto"><span alt="15 - Spawning a Turret.png" src="15 - Spawning a Turret.png" class="internal-embed media-embed image-embed is-loaded"><img alt="15 - Spawning a Turret.png" src="lib/media/15-spawning-a-turret.png"></span></p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Create a new <code>GameObject</code> in the <strong>Turret Spawn Test Scene</strong>, this will be your TurretSpawner</li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">Add the <code>TurretSpawner</code> component</li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">In the <strong>Inspector</strong> set the <code>TurretPrefab</code> to use the prefab you created for your Turret</li>
</ul></div><div class="el-p"><p dir="auto"><span alt="set-turret-prefab.webm" src="set-turret-prefab.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/set-turret-prefab.webm" style=""></video></span></p></div><div class="el-h3 heading-wrapper"><h3 data-heading="SpawnTurret(TileController)" dir="auto" class="heading" id="SpawnTurret(TileController)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>SpawnTurret(TileController)</h3><div class="heading-children"><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Add a <code>SpawnTurret(TileController)</code> method to your <code>TurretSpawner</code></li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">In <code>SpawnTurret</code>, check to see if the specified <code>TileController</code> <code>IsOccupied</code> . </li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">If it is, do nothing.  (<code>return</code>)</li>
<li data-line="3" data-task="" class="task-list-item" dir="auto"><input data-line="3" type="checkbox" class="task-list-item-checkbox">If it is not occupied, <code>Instantiate</code> a <code>TurretPrefab</code> and set the position to match the position of the <code>TileController</code></li>
</ul></div><div class="el-p"><p dir="auto"><span alt="SpawnTurretMethod.png" src="SpawnTurretMethod.png" class="internal-embed media-embed image-embed is-loaded"><img alt="SpawnTurretMethod.png" src="lib/media/spawnturretmethod.png"></span></p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Testing SpawnTurret" dir="auto" class="heading" id="Testing_SpawnTurret"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Testing SpawnTurret</h3><div class="heading-children"><div class="el-p"><p dir="auto">Before writing a handler to register your <code>TurretSpanwer</code> on all tiles, it is helpful to test if the <code>SpawnTurret</code> method is working against a single tile.</p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">In the <strong>Hierarchy</strong> select a <code>Tile</code></li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">In the <strong>Inspector</strong> add listener to the <code>OnCursorClick</code> event<br>
<span alt="select-tile.webm" src="select-tile.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/select-tile.webm" style=""></video></span></li>
<li data-line="3" data-task="" class="task-list-item" dir="auto"><input data-line="3" type="checkbox" class="task-list-item-checkbox">Add your <code>TurretSpanwer</code> as the listening object</li>
<li data-line="4" data-task="" class="task-list-item" dir="auto"><input data-line="4" type="checkbox" class="task-list-item-checkbox">Select the <code>TurretSpawner.SpawnTurret</code> method as the method to invoke<br>
<span alt="set-spawn-turret-invoke.webm" src="set-spawn-turret-invoke.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/set-spawn-turret-invoke.webm" style=""></video></span></li>
<li data-line="6" data-task="" class="task-list-item" dir="auto"><input data-line="6" type="checkbox" class="task-list-item-checkbox">Take note of the tile that you updated.</li>
<li data-line="7" data-task="" class="task-list-item" dir="auto"><input data-line="7" type="checkbox" class="task-list-item-checkbox">Enter Play Mode and click on that tile, if all went well, a turret was spawned into the scene<br>
<span alt="spawn-turret.webm" src="spawn-turret.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/spawn-turret.webm" style=""></video></span></li>
</ul></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Bug: Cursor Blocked" dir="auto" class="heading" id="Bug:_Cursor_Blocked"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Bug: Cursor Blocked</h2><div class="heading-children"><div class="el-p"><p dir="auto">You likely noticed that after you placed your turret, the cursor stops registering on tiles that are near your turret. This is because the collider the turret is using to detect enemies is blocking the tile. To prevent this, you can create <strong>Collision Layers</strong> for your objects and specify which layers mouse events detect.</p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Adding a Tile Collision Layer" dir="auto" class="heading" id="Adding_a_Tile_Collision_Layer"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Adding a Tile Collision Layer</h2><div class="heading-children"><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto">
<p><input data-line="0" type="checkbox" class="task-list-item-checkbox">From the top menu select <code>Edit</code> &gt; <code>Project Settings</code></p>
</li>
<li data-line="1" data-task="" class="task-list-item" dir="auto">
<p><input data-line="1" type="checkbox" class="task-list-item-checkbox">On the left side, select the <code>Tags and Layers</code> tab<br>
<span alt="Assets/m15-Spawning a Turret/tags-and-layers.png" src="Assets/m15-Spawning a Turret/tags-and-layers.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Assets/m15-Spawning a Turret/tags-and-layers.png" src="lib/media/tags-and-layers.png"></span></p>
</li>
<li data-line="4" data-task="" class="task-list-item" dir="auto">
<p><input data-line="4" type="checkbox" class="task-list-item-checkbox">If necessary, open the <code>Layers</code> drop down. (Ensure you are not in <code>Sorting Layers</code> / <code>Rendering Layers</code>)</p>
</li>
<li data-line="5" data-task="" class="task-list-item" dir="auto">
<p><input data-line="5" type="checkbox" class="task-list-item-checkbox">Add a <code>Tiles</code> layer<br>
<span alt="add-tile-layer.png" src="add-tile-layer.png" class="internal-embed media-embed image-embed is-loaded"><img alt="add-tile-layer.png" src="lib/media/add-tile-layer.png"></span></p>
</li>
</ul></div><div class="el-h3 heading-wrapper"><h3 data-heading="Apply the Tile Layer to your Tile Prefabs" dir="auto" class="heading" id="Apply_the_Tile_Layer_to_your_Tile_Prefabs"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Apply the Tile Layer to your Tile Prefabs</h3><div class="heading-children"><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">In the <strong>Project</strong> explorer tab, navigate to your <code>Prefabs &gt; Tiles</code> folder</li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">Select all of your Tile prefabs</li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">In the <strong>Inspector</strong>, change the <code>Layer</code> to <code>Tile</code></li>
<li data-line="3" data-task="" class="task-list-item" dir="auto"><input data-line="3" type="checkbox" class="task-list-item-checkbox">When prompted, select change children</li>
<li data-line="4" data-task="" class="task-list-item" dir="auto"><input data-line="4" type="checkbox" class="task-list-item-checkbox">This will apply the <code>Tile</code> layer to all of your tile objects and their models<br>
<span alt="apply-tile-layer.webm" src="apply-tile-layer.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/apply-tile-layer.webm" style=""></video></span></li>
</ul></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Challenge: Update Camera Culling to Include Tiles" dir="auto" class="heading" id="Challenge:_Update_Camera_Culling_to_Include_Tiles"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Challenge: Update Camera Culling to Include Tiles</h3><div class="heading-children"><div class="el-p"><p dir="auto">If you switch to the <strong>Game</strong> tab or enter <strong>Play Mode</strong> you will no longer see your tiles. This is because the Camera does not render them.</p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Update the camera's <code>Culling Mask</code> to see the <code>Tile</code> layer</li>
</ul></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Camera Event Layer" dir="auto" class="heading" id="Camera_Event_Layer"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Camera Event Layer</h2><div class="heading-children"><div class="el-p"><p dir="auto">By default, the Camera will detect all collision layers. This means that your mouse is being blocked by your turrets area of engagement collider. To fix this, you must change which layers the camera allows the mouse to interact with. This is called the Camera's Event Layer. </p></div><div class="el-p"><p dir="auto">Unfortunately, there is no way to set this in the <strong>Inspector</strong>. But, it is possible to modify the <code>Camera.eventMask</code> field using a script.</p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Read the Friendly Manual: <a data-tooltip-position="top" aria-label="https://docs.unity3d.com/6000.0/Documentation/ScriptReference/Camera-eventMask.html" rel="noopener nofollow" class="external-link" href="https://docs.unity3d.com/6000.0/Documentation/ScriptReference/Camera-eventMask.html" target="_blank">Unity - Scripting API: Camera.eventMask</a></li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">Read the Friendly Manual: <a data-tooltip-position="top" aria-label="https://docs.unity3d.com/6000.0/Documentation/ScriptReference/LayerMask.html" rel="noopener nofollow" class="external-link" href="https://docs.unity3d.com/6000.0/Documentation/ScriptReference/LayerMask.html" target="_blank">Unity - Scripting API: LayerMask</a></li>
<li data-line="2" data-task="" class="task-list-item" dir="auto"><input data-line="2" type="checkbox" class="task-list-item-checkbox">Create a new <code>MonoBehaviour</code> called <code>CameraEventMaskController</code></li>
<li data-line="3" data-task="" class="task-list-item" dir="auto"><input data-line="3" type="checkbox" class="task-list-item-checkbox">Add a <code>LayerMask EventMask</code> property<br>
<span alt="eventmask.png" src="eventmask.png" class="internal-embed media-embed image-embed is-loaded"><img alt="eventmask.png" src="lib/media/eventmask.png"></span></li>
<li data-line="5" data-task="" class="task-list-item" dir="auto"><input data-line="5" type="checkbox" class="task-list-item-checkbox">In the <strong>Hierarchy</strong> select your <strong>Main Camera</strong></li>
<li data-line="6" data-task="" class="task-list-item" dir="auto"><input data-line="6" type="checkbox" class="task-list-item-checkbox">In the <strong>Inspector</strong>, add a <code>CameraEventMaskController</code></li>
<li data-line="7" data-task="" class="task-list-item" dir="auto"><input data-line="7" type="checkbox" class="task-list-item-checkbox">Set the <code>EventMask</code> to <code>Tile</code><br>
<span alt="set-event-mask-tile.webm" src="set-event-mask-tile.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/set-event-mask-tile.webm" style=""></video></span></li>
<li data-line="9" data-task="" class="task-list-item" dir="auto"><input data-line="9" type="checkbox" class="task-list-item-checkbox">Add an <code>Awake()</code> method to your <code>CameraEventMaskController</code></li>
<li data-line="10" data-task="" class="task-list-item" dir="auto"><input data-line="10" type="checkbox" class="task-list-item-checkbox">In <code>Awake()</code></li>
<li data-line="11" data-task="" class="task-list-item" dir="auto"><input data-line="11" type="checkbox" class="task-list-item-checkbox">Use <code>GetComponent&lt;Camera&gt;()</code> to find the <code>Camera</code> component</li>
<li data-line="12" data-task="" class="task-list-item" dir="auto"><input data-line="12" type="checkbox" class="task-list-item-checkbox">Set the <code>camera</code>'s <code>eventMask</code> to the <code>EventMask</code> property<br>
<span alt="15 - Spawning a Turret 1.png" src="15 - Spawning a Turret 1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="15 - Spawning a Turret 1.png" src="lib/media/15-spawning-a-turret-1.png"></span></li>
<li data-line="14" data-task="" class="task-list-item" dir="auto"><input data-line="14" type="checkbox" class="task-list-item-checkbox">Enter Play mode and test that you can still see the selected tile after placing a turret<br>
<span alt="layer-mask-working.webm" src="layer-mask-working.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/layer-mask-working.webm" style=""></video></span></li>
</ul></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Challenge: Listen to all tiles" dir="auto" class="heading" id="Challenge:_Listen_to_all_tiles"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Challenge: Listen to all tiles</h2><div class="heading-children"><div class="el-p"><p dir="auto">Now that you have verified that you can spawn a single turret, you are ready to listen to all of the tiles in a grid.</p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Remove the listener you added to the tile in your scene</li>
<li data-line="1" data-task="" class="task-list-item" dir="auto"><input data-line="1" type="checkbox" class="task-list-item-checkbox">Review how you listen to all tiles in <code>TileCursor</code><br>
Update <code>TurretSpawner</code> such that</li>
<li data-line="3" data-task="" class="task-list-item" dir="auto"><input data-line="3" type="checkbox" class="task-list-item-checkbox">OnEnable, listen to all of the tiles in your test scene's grid</li>
<li data-line="4" data-task="" class="task-list-item" dir="auto"><input data-line="4" type="checkbox" class="task-list-item-checkbox">OnDisable, stop listening to all of the tiles in your test scene's grid</li>
</ul></div><div class="el-p"><p dir="auto">When you have finished, you should be able to click on any tile in the scene to spawn a turret:<br>
<span alt="spawn-many-turrets.webm" src="spawn-many-turrets.webm" class="internal-embed media-embed video-embed is-loaded"><video controls="" preload="metadata" src="lib/media/spawn-many-turrets.webm" style=""></video></span></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Bug: Spawning Multiple Turrets on the Same Tile" dir="auto" class="heading" id="Bug:_Spawning_Multiple_Turrets_on_the_Same_Tile"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Bug: Spawning Multiple Turrets on the Same Tile</h2><div class="heading-children"><div class="el-p"><p dir="auto">Currently, if you click the same tile multiple times, it will spawn multiple turrets. This is because you never set <code>tilecontroller.IsOccupied</code> to <code>true</code> after spawning a turret in <code>SpawnTurret</code> Can you fix this bug?</p></div><div class="el-ul"><ul class="contains-task-list">
<li data-line="0" data-task="" class="task-list-item" dir="auto"><input data-line="0" type="checkbox" class="task-list-item-checkbox">Update <code>SpawnTurret</code> to set <code>tileController.IsOccupied</code> to <code>true</code></li>
<li data-line="1" dir="auto">Hint: You will also need to modify <code>TileController</code></li>
</ul></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="What's Next?" dir="auto" class="heading" id="What's_Next?"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>What's Next?</h2><div class="heading-children"><div class="el-p"><p dir="auto">Now that you are able to spawn turrets on a tile, it is time to add a TileCursor and a <code>TurretSpawner</code> to your map. In the next lesson, you will learn how to add a button that enables the player to build a turret in your level.</p></div><div class="el-p"><p dir="auto"><a data-href="16 - Placing Turrets" href="lessons/16-placing-turrets.html" class="internal-link" target="_self" rel="noopener nofollow">16 - Placing Turrets</a></p></div><div class="mod-footer mod-ui"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="lessons\15-turret-spawner.html#15 - Turret Spawner"><div class="tree-item-contents heading-link" heading-name="15 - Turret Spawner"><span class="tree-item-title">15 - Turret Spawner</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#Challenge:_Create_an_OnCursorClick_event"><div class="tree-item-contents heading-link" heading-name="Challenge: Create an OnCursorClick event"><span class="tree-item-title">Challenge: Create an OnCursorClick event</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#TurretSpawner"><div class="tree-item-contents heading-link" heading-name="TurretSpawner"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">TurretSpawner</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="lessons\15-turret-spawner.html#SpawnTurret(TileController)"><div class="tree-item-contents heading-link" heading-name="SpawnTurret(TileController)"><span class="tree-item-title">SpawnTurret(TileController)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="lessons\15-turret-spawner.html#Testing_SpawnTurret"><div class="tree-item-contents heading-link" heading-name="Testing SpawnTurret"><span class="tree-item-title">Testing SpawnTurret</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#Bug:_Cursor_Blocked"><div class="tree-item-contents heading-link" heading-name="Bug: Cursor Blocked"><span class="tree-item-title">Bug: Cursor Blocked</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#Adding_a_Tile_Collision_Layer"><div class="tree-item-contents heading-link" heading-name="Adding a Tile Collision Layer"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Adding a Tile Collision Layer</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="lessons\15-turret-spawner.html#Apply_the_Tile_Layer_to_your_Tile_Prefabs"><div class="tree-item-contents heading-link" heading-name="Apply the Tile Layer to your Tile Prefabs"><span class="tree-item-title">Apply the Tile Layer to your Tile Prefabs</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="lessons\15-turret-spawner.html#Challenge:_Update_Camera_Culling_to_Include_Tiles"><div class="tree-item-contents heading-link" heading-name="Challenge: Update Camera Culling to Include Tiles"><span class="tree-item-title">Challenge: Update Camera Culling to Include Tiles</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#Camera_Event_Layer"><div class="tree-item-contents heading-link" heading-name="Camera Event Layer"><span class="tree-item-title">Camera Event Layer</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#Challenge:_Listen_to_all_tiles"><div class="tree-item-contents heading-link" heading-name="Challenge: Listen to all tiles"><span class="tree-item-title">Challenge: Listen to all tiles</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#Bug:_Spawning_Multiple_Turrets_on_the_Same_Tile"><div class="tree-item-contents heading-link" heading-name="Bug: Spawning Multiple Turrets on the Same Tile"><span class="tree-item-title">Bug: Spawning Multiple Turrets on the Same Tile</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="lessons\15-turret-spawner.html#What's_Next?"><div class="tree-item-contents heading-link" heading-name="What's Next?"><span class="tree-item-title">What's Next?</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>